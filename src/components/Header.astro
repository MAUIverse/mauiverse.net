---
// Fixed site header with responsive menu (Tailwind only).
---
<header class="fixed inset-x-0 top-0 z-50 border-b border-gray-200 bg-white">
  <div class="mx-auto flex h-16 max-w-6xl items-center justify-between px-4 sm:px-6 lg:px-8">
    <a href="/" class="flex items-center gap-3">
      <img
        src="/img/mauiverse-logo-transparent.png"
        alt="MAUIverse"
        width="32"
        height="32"
        class="h-8 w-8"
        loading="eager"
        decoding="async"
      />
      <span class="font-header text-brand-dark text-lg font-bold tracking-wide">
        MAUIverse
      </span>
    </a>

    <nav class="hidden items-center gap-6 md:flex" aria-label="Primary">
      <a
      href="/community-feed/"
      class="text-sm font-semibold text-brand-dark transition-colors hover:text-brand-extra"
    >
      Community Feed
    </a>
      <a
        href="/built-with-maui/"
        class="text-sm font-semibold text-brand-dark transition-colors hover:text-brand-extra"
      >
        Built with MAUI
      </a>
      <a
      href="/newsletter"
      class="text-sm font-semibold text-brand-dark transition-colors hover:text-brand-extra"
    >
      Newsletter
    </a>
      <a
        href="/discord/"
        target="_blank"
        rel="noopener noreferrer"
        class="text-sm font-semibold text-brand-dark transition-colors hover:text-brand-extra"
      >
        Discord
      </a>
    </nav>

    <button
      id="mobile-menu-button"
      type="button"
      class="inline-flex items-center justify-center rounded-md p-2 text-brand-dark hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-brand md:hidden"
      aria-label="Open menu"
      aria-controls="mobile-menu"
      aria-expanded="false"
    >
      <svg
        class="h-6 w-6"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        aria-hidden="true"
      >
        <line x1="4" y1="6" x2="20" y2="6"></line>
        <line x1="4" y1="12" x2="20" y2="12"></line>
        <line x1="4" y1="18" x2="20" y2="18"></line>
      </svg>
    </button>
  </div>
</header>

<div
  id="mobile-menu"
  class="fixed inset-x-0 top-16 z-40 hidden border-b border-gray-200 bg-white shadow-sm md:hidden"
>
  <nav class="mx-auto max-w-6xl px-4 py-3 sm:px-6 lg:px-8" aria-label="Mobile Primary">
    <div class="flex flex-col gap-2">
      <a
        href="/newsletter"
        class="rounded-md px-3 py-2 text-sm font-semibold text-brand-dark transition-colors hover:bg-gray-50 hover:text-brand-extra"
      >
        Newsletter
      </a>
      <a
        href="/built-with-maui/"
        class="rounded-md px-3 py-2 text-sm font-semibold text-brand-dark transition-colors hover:bg-gray-50 hover:text-brand-extra"
      >
        Built with MAUI
      </a>
      <a
        href="/community-feed/"
        class="rounded-md px-3 py-2 text-sm font-semibold text-brand-dark transition-colors hover:bg-gray-50 hover:text-brand-extra"
      >
        Community Feed
      </a>
      <a
        href="/discord/"
        target="_blank"
        rel="noopener noreferrer"
        class="rounded-md px-3 py-2 text-sm font-semibold text-brand-dark transition-colors hover:bg-gray-50 hover:text-brand-extra"
      >
        Discord
      </a>
    </div>
  </nav>
</div>

<script>
  (() => {
    const button = document.getElementById('mobile-menu-button');
    const menu = document.getElementById('mobile-menu');
    if (!(button instanceof HTMLButtonElement) || !(menu instanceof HTMLElement)) return;

    const setOpen = (open) => {
      menu.classList.toggle('hidden', !open);
      button.setAttribute('aria-expanded', String(open));
      button.setAttribute('aria-label', open ? 'Close menu' : 'Open menu');
    };

    button.addEventListener('click', () => {
      const isOpen = !menu.classList.contains('hidden');
      setOpen(!isOpen);
    });

    menu.addEventListener('click', (e) => {
      const target = e.target;
      if (target instanceof HTMLAnchorElement) setOpen(false);
    });

    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') setOpen(false);
    });

    window.addEventListener('resize', () => {
      if (window.matchMedia('(min-width: 768px)').matches) setOpen(false);
    });
  })();
</script>
