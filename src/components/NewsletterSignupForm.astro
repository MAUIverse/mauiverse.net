---
interface Props {
  variant?: 'home' | 'newsletter';
}

const { variant = 'newsletter' } = Astro.props;

const isHome = variant === 'home';
const formClass = isHome
  ? 'sendfox-form max-w-md mx-auto relative'
  : 'sendfox-form max-w-md mx-auto text-left relative';
const gridClass = isHome ? 'grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4' : 'grid grid-cols-1 md:grid-cols-2 gap-4 mb-4';
const suffix = isHome ? '_home' : '';
const submitClass = isHome
  ? 'w-full sm:w-auto border-2 border-brand-extra bg-brand-extra text-white font-bold px-8 py-3 rounded-full text-md hover:bg-brand-extraDark hover:border-brand-extraDark transition'
  : 'w-full text-center md:w-auto border-2 border-brand-extra bg-brand-extra text-white font-bold px-8 py-3 rounded-full text-md hover:bg-brand-extraDark hover:border-brand-extraDark transition';
---

<form
  method="post"
  action="https://sendfox.com/form/m79vql/1rzrlz"
  class={formClass}
  id="1rzrlz"
  data-async="true"
  data-recaptcha="true"
>
  <div class={gridClass}>
    <div>
      <label for={`sendfox_form_name${suffix}`} class="block text-sm font-medium text-brand-dark mb-1">
        First Name
      </label>
      <input
        type="text"
        id={`sendfox_form_name${suffix}`}
        placeholder="First Name"
        name="first_name"
        required
        class="w-full px-4 py-2.5 border border-edge rounded-md bg-surface-alt text-brand-dark placeholder-muted-light focus:ring-2 focus:ring-brand focus:border-brand outline-none transition"
      />
    </div>
    <div>
      <label
        for={`sendfox_form_last_name${suffix}`}
        class="block text-sm font-medium text-brand-dark mb-1"
      >
        Last Name
      </label>
      <input
        type="text"
        id={`sendfox_form_last_name${suffix}`}
        placeholder="Last Name"
        name="last_name"
        required
        class="w-full px-4 py-2.5 border border-edge rounded-md bg-surface-alt text-brand-dark placeholder-muted-light focus:ring-2 focus:ring-brand focus:border-brand outline-none transition"
      />
    </div>
  </div>
  <div class="mb-5">
    <label for={`sendfox_form_email${suffix}`} class="block text-sm font-medium text-brand-dark mb-1">
      Email
    </label>
    <input
      type="email"
      id={`sendfox_form_email${suffix}`}
      placeholder="Email"
      name="email"
      required
      class="w-full px-4 py-2.5 border border-edge rounded-md bg-surface-alt text-brand-dark placeholder-muted-light focus:ring-2 focus:ring-brand focus:border-brand outline-none transition"
    />
  </div>
  <div class="absolute left-[-5000px]" aria-hidden="true">
    <input type="text" name="a_password" tabindex="-1" value="" autocomplete="off" />
  </div>

  {isHome ? (
    <p class="text-sm text-muted-light mb-4">
      The form is protected by <a href="/privacy" class="text-brand hover:underline">reCAPTCHA</a>.
    </p>
  ) : (
    <div class="text-center">
      <p class="text-sm text-muted-light mb-4">
        The form is protected by <a href="/privacy" class="text-brand hover:underline">reCAPTCHA</a>.
      </p>
    </div>
  )}

  <div class:list={['text-center', { 'sm:text-left': isHome }] }>
    <button
      type="submit"
      class={submitClass}
    >
      Subscribe
    </button>
  </div>
</form>
